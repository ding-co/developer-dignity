<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <select name="" id="city"></select>
    <button onclick="doSearch()">조회</button>
    <button>라인추가</button>
    <button>라인삭제</button>
    <table>
      <thead>
        <tr>
          <th>제품명</th>
          <th>가격</th>
        </tr>
      </thead>
      <tbody id="table1Tbody"></tbody>
    </table>
    <script>
      let brands = ['애플', '구글', '메타', '아마존', '카카오', '네이버'];
      console.log(brands.toString());

      console.log(brands.join(' * '));

      function doSearch() {
        const productList = [
          {
            name: '커피',
            price: 700,
          },
          {
            name: '오미자',
            price: 500,
          },
          {
            name: '파워에이드',
            price: 1000,
          },
          {
            name: '밀키스',
            price: 500,
          },
        ];

        let h = [];

        // push()

        for (const product of productList) {
          // h += '<tr>';
          // h += '<td>' + product.name + '</td>';
          // h += '<td>' + product.price + '</td>';
          // h += '</tr>';

          h.push('<tr>');
          h.push('<td>' + product.name + '</td>');
          h.push('<td>' + product.price + '</td>');
          h.push('</tr>');
        }

        document.getElementById('table1Tbody').innerHTML = h.join('');
      }

      // pop()

      // shift()
      let eventQueue = [];
      eventQueue.shift();

      // unshift()
      function loadCity(needAll) {
        let cities = [
          { code: '02', title: '서울' },
          { code: '21', title: '부산' },
          { code: '064', title: '제주' },
        ];

        let h = [];
        for (const city of cities) {
          h.push(
            '<option value="' + city.code + '">' + city.title + '</option>'
          );
        }

        if (needAll) {
          h.unshift('<option value="">==전체==</option>');
        }

        document.getElementById('city').innerHTML = h.join('');
      }

      loadCity(true);

      // splice()
      brands.splice(1, 0, '리턴밸류', '더그레잇');
      console.log(brands);

      const productList = [
        {
          name: '커피',
          price: 700,
        },
        {
          name: '오미자',
          price: 500,
        },
        {
          name: '파워에이드',
          price: 1000,
        },
        {
          name: '밀키스',
          price: 500,
        },
      ];

      // 이렇게 사용하지 말고 splice() 이용하기!
      // const len = productList.length;
      // const newProductList = [];
      // for (let i = 0; i < len; i++) {
      //   if (i === 3) {
      //     newProductList.push({ name: '', price: 0 });
      //   } else {
      //     newProductList.push(productList[i]);
      //   }
      // }

      // concat()
      let arr1 = ['A', 'B'];
      let arr2 = ['C', 'D'];
      let arr3 = ['E', 'F', 'G'];
      let arr4 = arr1.concat(arr2, arr3);
      console.log(arr4);

      // let arr5 = [...arr1, ...arr2, ...arr3];
      // console.log(arr5);

      // slice()
      console.log(arr4.slice(1, 2));

      // sort()
      brands = ['애플', '구글', '메타', '아마존', '카카오', '네이버'];
      console.log(brands.sort());

      let points = [40, 100, 1, 5, 25, 10];
      console.log(points.sort());

      function numberSortAsc(a, b) {
        // return a - b;
        if (a > b) return 1;
        else if (a < b) return -1;
        else return 0;
      }

      function numberSortDes(a, b) {
        return b - a;
      }

      function objectSort(a, b) {
        // if (a.name > b.name) return 1;
        // else if (a.name < b.name) return -1;
        // else return 0;

        return a.price - b.price;
      }

      console.log(points.sort(numberSortDes));
      console.log(productList.sort(objectSort));

      // filter()
      let inputCoin = 1000;
      console.log(productList.filter((p) => p.price <= inputCoin));

      // map()
      const userList = [
        {
          firstName: '재석',
          lastName: '유',
          email: 'yu@gmail.com',
        },
        {
          firstName: '종국',
          lastName: '김',
          email: 'kim@gmail.com',
        },
        {
          firstName: '석진',
          lastName: '지',
          email: 'ji@gmail.com',
        },
        {
          firstName: '세찬',
          lastName: '양',
          email: 'yang@gmail.com',
        },
      ];

      function newUserMap(user) {
        return {
          // firstName: user.firstName,
          // lastName: user.lastName,
          email: user.email,
          fullName: user.lastName + user.firstName,
        };
      }

      let userList2 = userList.map(newUserMap);

      console.log(userList2);

      // reduce(fn(acc, currValue, currIndex, arr), acc 초깃값)
      points = [80, 90, 95, 78, 88, 92];
      let sum = points.reduce(function (
        accumulator,
        currentValue,
        currentIndex,
        arr
      ) {
        // 첫 번째 accumulator: 누적 값
        // 두 번째 currentValue: 현재 배열 요소
        // 세 번째 currentIndex: 현재 배열 인덱스 번호
        // 네 번째 arr: 항상 전체 배열 통째로
        return accumulator + currentValue;
      },
      0);
      console.log(sum);

      let sum2 = productList.reduce(function (total, product) {
        return total + product.price;
      }, 0);
      console.log(sum2);
      
    </script>
  </body>
</html>
